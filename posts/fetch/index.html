<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charset="UTF-8"><style>:where(img){height:auto}</style><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://astro-paper.pages.dev/posts/fetch/"><meta name="generator" content="Astro v4.5.5"><!-- General Meta Tags --><title>Fetchç¬”è®° | myjdml's Blog</title><meta name="title" content="Fetchç¬”è®° | myjdml's Blog"><meta name="description" content="This is a post which from Hexo to Astro."><meta name="author" content="myjdml"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="Fetchç¬”è®° | myjdml's Blog"><meta property="og:description" content="This is a post which from Hexo to Astro."><meta property="og:url" content="https://astro-paper.pages.dev/posts/fetch/"><meta property="og:image" content="https://astro-paper.pages.dev/posts/fetch%E7%AC%94%E8%AE%B0.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2024-03-17T18:13:41.816Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://astro-paper.pages.dev/posts/fetch/"><meta property="twitter:title" content="Fetchç¬”è®° | myjdml's Blog"><meta property="twitter:description" content="This is a post which from Hexo to Astro."><meta property="twitter:image" content="https://astro-paper.pages.dev/posts/fetch%E7%AC%94%E8%AE%B0.png"><!-- Google Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&amp;display=swap" rel="stylesheet"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script src="/toggle-theme.js"></script><style>.breadcrumb:where(.astro-ilhxcym7){width:100%;max-width:48rem;margin:2rem auto .25rem;padding-left:1rem;padding-right:1rem}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7){display:inline}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7) a:where(.astro-ilhxcym7){text-transform:capitalize;opacity:.7}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7) span:where(.astro-ilhxcym7){opacity:.7}.breadcrumb:where(.astro-ilhxcym7) ul:where(.astro-ilhxcym7) li:where(.astro-ilhxcym7):not(:last-child) a:where(.astro-ilhxcym7):hover{opacity:1}</style>
<link rel="stylesheet" href="/_astro/about.BwOfhuLp.css">
<style>#main-content:where(.astro-hsp6otuf){width:100%;max-width:48rem;margin-left:auto;margin-right:auto;padding-bottom:1rem;padding-left:1rem;padding-right:1rem}#main-content:where(.astro-hsp6otuf) h1:where(.astro-hsp6otuf){font-size:1.5rem;font-weight:600;line-height:2rem}@media (min-width:640px){#main-content:where(.astro-hsp6otuf) h1:where(.astro-hsp6otuf){font-size:1.875rem;line-height:2.25rem}}#main-content:where(.astro-hsp6otuf) p:where(.astro-hsp6otuf){margin-top:.5rem;margin-bottom:1.5rem;font-style:italic}a:where(.astro-blwjyjpt){text-decoration-line:underline;text-decoration-style:dashed;position:relative}a:where(.astro-blwjyjpt):hover{--tw-text-opacity:1;color:rgba(var(--color-accent),var(--tw-text-opacity));top:-.125rem}a:where(.astro-blwjyjpt):focus-visible{padding:.25rem}a:where(.astro-blwjyjpt) svg:where(.astro-blwjyjpt){--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y))rotate(var(--tw-rotate))skew(var(--tw-skew-x))skewY(var(--tw-skew-y))scaleX(var(--tw-scale-x))scaleY(var(--tw-scale-y));--tw-text-opacity:1;color:rgba(var(--color-text-base),var(--tw-text-opacity));opacity:.8;width:1.5rem;height:1.5rem;margin-right:-1.25rem}.group:where(.astro-blwjyjpt):hover a:where(.astro-blwjyjpt) svg:where(.astro-blwjyjpt){fill:rgb(var(--color-accent))}.pagination-wrapper:where(.astro-d776pwuy){justify-content:center;margin-top:auto;margin-bottom:2rem;display:flex}.disabled:where(.astro-d776pwuy){pointer-events:none;-webkit-user-select:none;user-select:none;opacity:.5}.disabled:where(.astro-d776pwuy):hover{--tw-text-opacity:1;color:rgba(var(--color-text-base),var(--tw-text-opacity))}.group:where(.astro-d776pwuy):hover .disabled:where(.astro-d776pwuy){fill:rgb(var(--color-text-base))}.group:where(.astro-d776pwuy):hover .disabled-svg:where(.astro-d776pwuy){fill:rgb(var(--color-text-base))!important}@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*){animation:none!important}::view-transition-old(*){animation:none!important}::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}.social-icons:where(.astro-wkojbtzc){flex-flow:column wrap;justify-content:center;align-items:center;gap:.25rem;display:flex}@media (min-width:640px){.social-icons:where(.astro-wkojbtzc){align-items:flex-start}}.link-button:where(.astro-wkojbtzc){--tw-scale-x:.9;--tw-scale-y:.9;transform:translate(var(--tw-translate-x),var(--tw-translate-y))rotate(var(--tw-rotate))skew(var(--tw-skew-x))skewY(var(--tw-skew-y))scaleX(var(--tw-scale-x))scaleY(var(--tw-scale-y));padding:.5rem}.link-button:where(.astro-wkojbtzc):hover{--tw-rotate:6deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y))rotate(var(--tw-rotate))skew(var(--tw-skew-x))skewY(var(--tw-skew-y))scaleX(var(--tw-scale-x))scaleY(var(--tw-scale-y))}@media (min-width:640px){.link-button:where(.astro-wkojbtzc){padding:.25rem}}main:where(.astro-vj4tpspi){width:100%;max-width:48rem;margin-left:auto;margin-right:auto;padding-bottom:3rem;padding-left:1rem;padding-right:1rem}.post-title:where(.astro-vj4tpspi){--tw-text-opacity:1;color:rgba(var(--color-accent),var(--tw-text-opacity));font-size:1.5rem;font-weight:600;line-height:2rem}</style><script type="module" src="/_astro/hoisted.BATETSH8.js"></script><style>[data-astro-transition-scope=astro-ti6a3mbw-1]{view-transition-name:fetchç¬”è®°}@layer astro{::view-transition-old(fetchç¬”è®°){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(fetchç¬”è®°){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(fetchç¬”è®°){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(fetchç¬”è®°){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-ti6a3mbw-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-ti6a3mbw-1]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-ti6a3mbw-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-ti6a3mbw-1]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-ti6a3mbw-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-ti6a3mbw-1]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-ti6a3mbw-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-ti6a3mbw-1]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style><style>[data-astro-transition-scope=astro-36ssibgs-2]{view-transition-name:js}@layer astro{::view-transition-old(js){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(js){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(js){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(js){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-36ssibgs-2],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-36ssibgs-2]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-36ssibgs-2],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-36ssibgs-2]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-36ssibgs-2],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-36ssibgs-2]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-36ssibgs-2],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-36ssibgs-2]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style><style>[data-astro-transition-scope=astro-36ssibgs-3]{view-transition-name:fetch}@layer astro{::view-transition-old(fetch){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(fetch){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(fetch){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(fetch){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-36ssibgs-3],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-36ssibgs-3]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-36ssibgs-3],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-36ssibgs-3]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-36ssibgs-3],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-36ssibgs-3]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-36ssibgs-3],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-36ssibgs-3]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style><style>[data-astro-transition-scope=astro-36ssibgs-4]{view-transition-name:ajax}@layer astro{::view-transition-old(ajax){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(ajax){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(ajax){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(ajax){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-36ssibgs-4],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-36ssibgs-4]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-36ssibgs-4],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-36ssibgs-4]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-36ssibgs-4],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-36ssibgs-4]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-36ssibgs-4],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-36ssibgs-4]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style></head> <body>  <header class="astro-3ef6ksr2"> <a id="skip-to-content" href="#main-content" class="astro-3ef6ksr2">Skip to content</a> <div class="astro-3ef6ksr2 nav-container"> <div class="astro-3ef6ksr2 top-nav-wrap"> <a href="/" class="astro-3ef6ksr2 logo whitespace-nowrap"> myjdml's Blog </a> <nav id="nav-menu" class="astro-3ef6ksr2"> <button class="astro-3ef6ksr2 focus-outline hamburger-menu" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="astro-3ef6ksr2 menu-icon"> <line x1="7" y1="12" x2="21" y2="12" class="line astro-3ef6ksr2"></line> <line x1="3" y1="6" x2="21" y2="6" class="line astro-3ef6ksr2"></line> <line x1="12" y1="18" x2="21" y2="18" class="line astro-3ef6ksr2"></line> <line x1="18" y1="6" x2="6" y2="18" class="astro-3ef6ksr2 close"></line> <line x1="6" y1="6" x2="18" y2="18" class="astro-3ef6ksr2 close"></line> </svg> </button> <ul id="menu-items" class="astro-3ef6ksr2 display-none sm:flex"> <li class="astro-3ef6ksr2"> <a href="/posts/" class="astro-3ef6ksr2">
Posts
</a> </li> <li class="astro-3ef6ksr2"> <a href="/tags/" class="astro-3ef6ksr2">
Tags
</a> </li> <li class="astro-3ef6ksr2"> <a href="/about/" class="astro-3ef6ksr2">
About
</a> </li> <li class="astro-3ef6ksr2"> <a href="/search/" class="astro-3ef6ksr2 focus-outline flex group hover:text-skin-accent inline-block p-3 sm:p-1" aria-label="search" title="Search"> <svg xmlns="http://www.w3.org/2000/svg" class="astro-3ef6ksr2 scale-125 sm:scale-100"><path d="M19.023 16.977a35.13 35.13 0 0 1-1.367-1.384c-.372-.378-.596-.653-.596-.653l-2.8-1.337A6.962 6.962 0 0 0 16 9c0-3.859-3.14-7-7-7S2 5.141 2 9s3.14 7 7 7c1.763 0 3.37-.66 4.603-1.739l1.337 2.8s.275.224.653.596c.387.363.896.854 1.384 1.367l1.358 1.392.604.646 2.121-2.121-.646-.604c-.379-.372-.885-.866-1.391-1.36zM9 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z" class="astro-3ef6ksr2"></path> </svg> <span class="astro-3ef6ksr2 sr-only">Search</span> </a> </li> <li class="astro-3ef6ksr2"> <button id="theme-btn" class="astro-3ef6ksr2 focus-outline" title="Toggles light &amp; dark" aria-label="auto" aria-live="polite"> <svg xmlns="http://www.w3.org/2000/svg" id="moon-svg" class="astro-3ef6ksr2"> <path d="M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z" class="astro-3ef6ksr2"></path> </svg> <svg xmlns="http://www.w3.org/2000/svg" id="sun-svg" class="astro-3ef6ksr2"> <path d="M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z" class="astro-3ef6ksr2"></path> </svg> </button> </li> </ul> </nav> </div> </div> <div class="max-w-3xl mx-auto px-4"> <hr class="border-skin-line" aria-hidden="true"> </div> </header>    <div class="astro-vj4tpspi flex justify-start max-w-3xl mx-auto px-2 w-full"> <button class="astro-vj4tpspi flex focus-outline hover:opacity-75 mb-2 mt-8" onclick='history.length===1?window.location="/":history.back();
'> <svg xmlns="http://www.w3.org/2000/svg" class="astro-vj4tpspi"><path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" class="astro-vj4tpspi"></path> </svg><span class="astro-vj4tpspi">Go back</span> </button> </div> <main id="main-content" class="astro-vj4tpspi"> <h1 class="astro-vj4tpspi post-title" data-astro-transition-scope="astro-ti6a3mbw-1">Fetchç¬”è®°</h1> <div class="astro-vj4tpspi flex items-center my-2 opacity-80 space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="inline-block fill-skin-base h-6 min-w-[1.375rem] scale-100 w-6" aria-hidden="true"><path d="M7 11h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"></path><path d="M5 22h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM19 8l.001 12H5V8h14z"></path></svg><span class="sr-only">Published:</span><span class="italic text-base"><time datetime="2024-03-17T18:13:41.816Z">Mar 18, 2024</time><span aria-hidden="true"> | </span><span class="sr-only">&nbsp;at&nbsp;</span><span class="text-nowrap">02:13 AM</span></span></div> <article id="article" role="article" class="astro-vj4tpspi max-w-3xl mx-auto mt-8 prose"> <h2 id="table-of-contents">Table of contents</h2>
<p></p><details><summary>Open Table of contents</summary><p></p>
<ul>
<li><a href="#%E5%85%B3%E4%BA%8Eajax%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9B%9E%E9%A1%BE">å…³äºAJAXçš„ä¸€äº›å›é¡¾</a></li>
<li><a href="#fetch-fetch-fetch">Fetch Fetch Fetchï¼ï¼ï¼</a>
<ul>
<li><a href="#fetch%E7%9A%84%E6%94%AF%E6%8C%81">Fetchçš„æ”¯æŒ</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8fetch%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">ä½¿ç”¨Fetchè·å–æ•°æ®</a></li>
<li><a href="#%E7%94%A8fetch%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE">ç”¨Fetchå‘é€æ•°æ®</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8fetch%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF">ä½¿ç”¨fetchå¤„ç†é”™è¯¯ä¿¡æ¯</a></li>
<li><a href="#%E5%A4%84%E7%90%86%E5%85%B6%E4%BB%96%E5%93%8D%E5%BA%94%E7%B1%BB%E5%9E%8B">å¤„ç†å…¶ä»–å“åº”ç±»å‹</a></li>
<li><a href="#%E4%BB%8B%E7%BB%8D-zifetch">ä»‹ç» zIFetch</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
<li><a href="#ref">ref</a></li>
</ul>
</li>
</ul>
<p></p></details><p></p>
<h2 id="å…³äºajaxçš„ä¸€äº›å›é¡¾">å…³äºAJAXçš„ä¸€äº›å›é¡¾</h2>
<p>åŸºæœ¬æ­¥éª¤ï¼š</p>
<p>è¿›è¡ŒAjaxè¯·æ±‚ç›¸ä¿¡å¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼Œè¿™é‡Œæˆ‘ä»¬ä¸€èµ·å›é¡¾ä¸€ä¸‹ï¼Œajaxè¯·æ±‚æ˜¯ä»€ä¹ˆæ ·çš„ï¼</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#C678DD">let</span><span style="color:#E06C75"> btn</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"#btn"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B">btn</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">addEventListener</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"click"</span><span style="color:#ABB2BF">, () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">  let</span><span style="color:#E06C75"> username</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"#username"</span><span style="color:#ABB2BF">).</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // //1.åˆ›å»ºä¸€ä¸ªæ–°çš„XMLHttpRequestå¯¹è±¡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // let xhr = new XMLHttpRequest();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // //æŒ‡å®šå‘é€</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // xhr.open("get", "../php/checkUsername.php?username=" + username, true);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // //å‘é€</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // xhr.send(null);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // //å‘é€æˆåŠŸéœ€è¦æ‰§è¡Œçš„ä»£ç </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // xhr.onreadystatechange = function () {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //     let result = xhr.responseText;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //     document.querySelector("#result").innerHTML = result;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  // }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //1.åˆ›å»ºä¸€ä¸ªæ–°çš„XMLHttpRequestå¯¹è±¡</span></span>
<span class="line"><span style="color:#C678DD">  let</span><span style="color:#E06C75"> xhr</span><span style="color:#56B6C2"> =</span><span style="color:#D19A66"> null</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">window</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">XMLHttpRequest</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#E06C75">    xhr</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> XMLHttpRequest</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF">  } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    //å…¼å®¹IE6</span></span>
<span class="line"><span style="color:#E06C75">    xhr</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> ActiveXObject</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Microsoft.XMLHTTP"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //å¯¹äºget</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //2.å‡†å¤‡å‘é€</span></span>
<span class="line"><span style="color:#E5C07B">  xhr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">open</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"get"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"../php/checkUsername.php?username="</span><span style="color:#56B6C2"> +</span><span style="color:#E06C75"> username</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //3.æ‰§è¡Œå‘é€</span></span>
<span class="line"><span style="color:#E5C07B">  xhr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">send</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">null</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //å¯¹äºpost</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //2.å‡†å¤‡å‘é€</span></span>
<span class="line"><span style="color:#E5C07B">  xhr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">open</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"post"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"../php/checkUsername.php"</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //3.æ‰§è¡Œå‘é€</span></span>
<span class="line"><span style="color:#C678DD">  let</span><span style="color:#E06C75"> param</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "username="</span><span style="color:#56B6C2"> +</span><span style="color:#E06C75"> username</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //å¯¹äºpostè¯·æ±‚æ¥è¯´ï¼Œå‚æ•°åº”è¯¥æ”¾åœ¨è¯·æ±‚ä½“å½“ä¸­ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //è®¾ç½®xhrè¯·æ±‚ä¿¡æ¯ï¼Œåªæœ‰postè¯·æ±‚æœ‰</span></span>
<span class="line"><span style="color:#E5C07B">  xhr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">setRequestHeader</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"Content-type"</span><span style="color:#ABB2BF">, </span><span style="color:#98C379">"application/x-www-form-urlencoded"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B">  xhr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">send</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">param</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  //4.è®¾ç½®å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#E5C07B">  xhr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">onreadystatechange</span><span style="color:#56B6C2"> =</span><span style="color:#C678DD"> function</span><span style="color:#ABB2BF"> () {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">xhr</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">readyState</span><span style="color:#56B6C2"> ===</span><span style="color:#D19A66"> 4</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">      if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">xhr</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#56B6C2"> ===</span><span style="color:#D19A66"> 200</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">        let</span><span style="color:#E06C75"> result</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> xhr</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">responseText</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E5C07B">        document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"#result"</span><span style="color:#ABB2BF">).</span><span style="color:#E06C75">innerHTML</span><span style="color:#56B6C2"> =</span><span style="color:#E06C75"> result</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">      }</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  };</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span></code></pre>
<h2 id="fetch-fetch-fetch">Fetch Fetch Fetchï¼ï¼ï¼</h2>
<p>å½“æˆ‘ä»¬ä½¿ç”¨javascriptå»å‘é€å’Œæ¥æ”¶ä¸€äº›ä¿¡æ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘èµ·ä¸€ä¸ªå«åšajaxè¯·æ±‚çš„ä¸œè¥¿ã€‚ajaxæ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå½“æˆ‘ä»¬éœ€è¦å‘é€å’Œæ¥æ”¶ä¿¡æ¯æ—¶ï¼Œä¿¡æ¯è¿”å›å›æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ”¹å˜HTMLï¼Œå°†å®ƒæ·»åŠ åˆ°é¡µé¢ä¸­ã€‚è¿™ä¸ªæ—¶å€™æµè§ˆå™¨å¾€å¾€éœ€è¦é‡æ–°æ¸²æŸ“ã€‚è€Œæˆ‘ä»¬å¦‚æœä½¿ç”¨äº†ajaxæŠ€æœ¯çš„è¯ï¼Œæµè§ˆå™¨ä¸éœ€è¦å»é‡æ–°åˆ·æ–°é¡µé¢ï¼Œè€Œæ˜¯åªæ”¹å˜éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œè®©é¡µé¢å±€éƒ¨åˆ·æ–°ã€‚</p>
<p>ç”±äºåŸç”Ÿçš„jsä»£ç å®ç°ajaxååˆ†çš„ç¹çï¼Œå¹¶ä¸”æœ‰å„ç§é€‚é…çš„é—®é¢˜ï¼Œæ‰€ä»¥Jqueryå°è£…åº“å®ç°ajaxæ¨ªç©ºå‡ºä¸–ï¼Œåœ¨å½“æ—¶æˆä¸ºäº†ä¸€è‚¡æ½®æµã€‚å®ƒåªéœ€è¦å¼•å…¥Jqueryæ–‡ä»¶ï¼Œè¿›è¡Œä¸€äº›ç®€å•çš„é…ç½®ï¼Œå°±å¯ä»¥å®ç°ajaxå¼‚æ­¥è¯·æ±‚ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E5C07B">$</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">ajax</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#61AFEF">  success</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75;font-style:italic">data</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    /* do something with the data */</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#61AFEF">  error</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75;font-style:italic">err</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    /* do something when an error happens */</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span></code></pre>
<h3 id="fetchçš„æ”¯æŒ">Fetchçš„æ”¯æŒ</h3>
<p>Fetchçš„æ”¯æŒæ€§éå¸¸å¥½ï¼Œæ”¯æŒå‡ ä¹æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨ï¼ˆè€ç‰ˆçš„IEå’Œè¿·ä½ ç‰ˆçš„æ¬§æœ‹é™¤å¤–ï¼‰ã€‚è€Œä¸”å› ä¸ºFetchæ˜¯åŸç”Ÿçš„æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ååˆ†çš„å®‰å…¨ã€‚å¦‚æœä½ éœ€è¦ä½¿ç”¨ä¸€äº›æ–¹æ³•ï¼ŒåŸç”Ÿä¸æ”¯æŒã€‚è¿™é‡Œæœ‰ä¸€äº›<a href="https://github.com/github/fetch">è¡¥å……</a></p>
<h3 id="ä½¿ç”¨fetchè·å–æ•°æ®">ä½¿ç”¨Fetchè·å–æ•°æ®</h3>
<p>ä½¿ç”¨Fetchè·å–æ•°æ®å¾ˆå®¹æ˜“ï¼Œåªéœ€è¦çŸ¥é“èµ„æºåœ°å€å°±å¯ä»¥</p>
<p>ä¾‹å¦‚æˆ‘æƒ³è·å–åˆ°Chrisçš„ä»“åº“çš„æ•°æ®ï¼Œæˆ‘åªéœ€è¦å‘é€ä¸€ä¸ªgetè¯·æ±‚ç»™<code>api.github.com/users/chriscoyier/repos</code></p>
<p>è¿™æ ·å°±æ˜¯ä¸€ä¸ªfetchè¯·æ±‚ï¼š</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"https://api.github.com/users/chriscoyier/repos"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span></code></pre>
<p>è¿™æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ï¼ï¼</p>
<p>æ¥ä¸‹æ¥Fetchè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸éœ€è¦å›è°ƒå‡½æ•°å°±å¯ä»¥æ“ä½œå¼‚æ­¥æ–¹æ³•çš„å¯¹è±¡ã€‚</p>
<p>è·å–åˆ°æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬éœ€è¦è¿›è¡Œçš„ä¸€äº›æ“ä½œæ”¾åœ¨<code>.then</code>æ–¹æ³•é‡Œ</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"https://api.github.com/users/chriscoyier/repos"</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">  /* do something */</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span></code></pre>
<p>å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨fetchï¼Œä½ ä¼šå¯¹å®ƒè¿”å›çš„responseååˆ†æƒŠå–œã€‚å¦‚æœä½ ä½¿ç”¨<code>console.log(response)</code>ï¼Œä½ å°†å¾—åˆ°ä¸‹é¢è¿™äº›ä¿¡æ¯</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75">  body</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">ReadableStream</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  bodyUsed</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  headers</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">Headers</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  ok</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  redirected</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  status</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">200</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  statusText</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"OK"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"cors"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  url</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"http://some-website.com/some-url"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  __proto__</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">Response</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span></code></pre>
<p>è¿™é‡Œï¼Œä½ ä¼šçœ‹åˆ°fetchä¼šè¿”å›ç»™ä½ ä¸€äº›å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šå‘Šè¯‰ä½ è¯·æ±‚çš„çŠ¶æ€ã€‚ä½ ä¼šçœ‹åˆ°è¯·æ±‚æˆåŠŸï¼ˆok: true; status: 200ï¼‰ã€‚ä½†æ˜¯ä½ ä¹Ÿè®¸æ³¨æ„åˆ°äº†, åœ¨è¿™äº›å‚æ•°ä¸­ä½ çœ‹ä¸åˆ°ä»»ä½•ä½ è¯·æ±‚æˆåŠŸçš„æ•°æ®ï¼ï¼</p>
<p>äº‹å®å°±æ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬ä»GitHubè·å–çš„æ•°æ®éšè—åœ¨bodyçš„å¯è¯»æ–‡æ¡£æµä¸­ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåˆé€‚çš„æ–¹æ³•å»è½¬æ¢è¿™äº›æ–‡æ¡£æµï¼Œè®©å®ƒä»¬å˜æˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„æ•°æ®ã€‚<br>
æˆ‘ä»¬çŸ¥é“GitHubè¿”å›çš„æ˜¯ä¸€ä¸²jsonæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>response.json</code>æ¥è½¬æ¢è¿™äº›æ•°æ®ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ³•å»å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®ã€‚å¦‚æœè¿”å›çš„æ•°æ®æ˜¯XMLæ ¼å¼çš„ã€‚å¯ä»¥ç”¨<code>response.text</code>è¿›è¡Œæ•°æ®è½¬æ¢ï¼›å¦‚æœè¿”å›çš„æ•°æ®æ˜¯å›¾ç‰‡ã€‚å¯ä»¥ç”¨<code>response.blob</code></p>
<p>æ‰€æœ‰çš„è¿™äº›è½¬æ¢æ–¹æ³•ï¼ˆ<code>response.json</code> æˆ–è€…å…¶ä»–æ‰€æœ‰çš„ï¼‰è¿”å›çš„éƒ½æ˜¯å¦ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å†ç”¨ä¸€ä¸ª<code>.then</code>æ–¹æ³•æ¥è·å–è¿™äº›æ•°æ®ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"https://api.github.com/users/chriscoyier/repos"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">data</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    // Here's a list of repos!</span></span>
<span class="line"><span style="color:#E5C07B">    console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"></span></code></pre>
<p>OK!!è¿™å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç”¨fetchè¿›è¡Œå¼‚æ­¥æ“ä½œçš„ä»£ç äº†ã€‚ç®€çŸ­ä¸”ç®€å•ğŸ§²</p>
<h3 id="ç”¨fetchå‘é€æ•°æ®">ç”¨Fetchå‘é€æ•°æ®</h3>
<p>ä½¿ç”¨fetchå‘é€æ¶ˆæ¯æ˜¯ååˆ†ä¼˜é›…çš„ï¼Œä½ å¯ä»¥åªéœ€è¦é…ç½®ä¸€ä¸‹é…ç½®é¡¹å°±å¯ä»¥ä½¿ç”¨ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">options</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span></code></pre>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½ éœ€è¦è®¾ç½®ä½ æäº¤è¯·æ±‚çš„æ–¹å¼ã€‚å¦‚æœä½ æ²¡æœ‰è®¾ç½®ï¼Œfetchä¼šè‡ªåŠ¨å°†è®¾ç½®ä¸ºget</p>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®ä½ çš„è¯·æ±‚å¤´ã€‚åœ¨ç°åœ¨è¿™ä¸ªæ—¶é—´æ®µï¼Œæˆ‘ä»¬ä¸»è¦ç”¨çš„æ˜¯jsonæ•°æ®ã€‚æ‰€ä»¥æˆ‘ä»¬å°±è®¾ç½®<code>content-Type</code>ä¸º<code>application/json</code></p>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè®¾ç½®çš„æ˜¯bodyé‡Œçš„jsonæ•°æ®å¤„ç†ã€‚æˆ‘ä»¬ä½¿ç”¨jsonæ•°æ®çš„æ—¶å€™é€šå¸¸è¦è¿›è¡Œä¸€äº›å¤„ç†ã€‚æ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šè®¾ç½®<code>JSON.stringify</code></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªpostè¯·æ±‚çš„å®ä¾‹ï¼š</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#C678DD">let</span><span style="color:#E06C75"> content</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> { </span><span style="color:#E06C75">some</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"content"</span><span style="color:#ABB2BF"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// The actual fetch request</span></span>
<span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#E06C75">  method</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"post"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">  headers</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#98C379">    "Content-Type"</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"application/json"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#E06C75">  body</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">JSON</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">stringify</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">content</span><span style="color:#ABB2BF">),</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// .then()...</span></span>
<span class="line"></span></code></pre>
<p>å¦‚æœä½ çš„çœ¼å…‰è¶³å¤Ÿæ•é”ï¼Œä½ å°±ä¼šå‘ç°æœ‰ä¸€äº›æ¨¡ç‰ˆä»£ç å¯¹äºå¾ˆå¤š<code>post</code>,<code>put</code>å’Œ<code>delete</code>è¯·æ±‚éƒ½é€‚ç”¨ã€‚å½“æˆ‘ä»¬å·²ç»æ˜ç¡®äº†æˆ‘ä»¬ä¼šå‘é€jsonæ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é‡å¤çš„å°†å¤´éƒ¨è®¾ç½®ä¸º<code>JSON.stringify</code></p>
<p>ä½†æ˜¯å³ä½¿æˆ‘ä»¬ä½¿ç”¨æ¨¡æ¿ä»£ç ï¼Œfetchä¾ç„¶å¯ä»¥æŠŠå¼‚æ­¥è¯·æ±‚å®ç°çš„å¾ˆå¥½ã€‚</p>
<p>ç„¶è€Œå½“ä½¿ç”¨fetchçš„æ—¶å€™å¤„ç†é”™è¯¯ä¿¡æ¯çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰åƒå¤„ç†æˆåŠŸä¿¡æ¯è¿™ä¹ˆå®¹æ˜“ã€‚ã€‚ã€‚</p>
<h3 id="ä½¿ç”¨fetchå¤„ç†é”™è¯¯ä¿¡æ¯">ä½¿ç”¨fetchå¤„ç†é”™è¯¯ä¿¡æ¯</h3>
<p>å°½ç®¡æˆ‘ä»¬ä¸€ç›´å¸Œæœ›ajaxè¯·æ±‚èƒ½æˆåŠŸï¼Œä½†æ˜¯æœ‰æ—¶å€™å®ƒæ€»æ˜¯ä¼šå¤±è´¥çš„ã€‚ä¸€æ—¦å¤±è´¥ï¼Œæœ‰å¾ˆå¤šç§å¯èƒ½æ€§å¯¼è‡´fetchè¯·æ±‚å¤±è´¥ã€‚åŒ…æ‹¬å¹¶ä¸é™äºä»¥ä¸‹è¿™å‡ ç‚¹ï¼š</p>
<ol>
<li>ä½ å°è¯•å»è¯·æ±‚ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æºã€‚</li>
<li>ä½ æ²¡æœ‰æƒé™å»è·å–èµ„æºã€‚</li>
<li>ä½ è®¾ç½®çš„ä¸€äº›çš„è¯·æ±‚å‚æ•°é”™è¯¯ã€‚</li>
<li>æœåŠ¡å™¨æŠ›å‡ºé”™è¯¯ã€‚</li>
<li>æœåŠ¡å™¨è¯·æ±‚è¶…æ—¶ã€‚</li>
<li>æœåŠ¡å™¨å®•æœºã€‚</li>
<li>åå°çš„APIæ”¹å˜</li>
<li>ã€‚ã€‚ã€‚</li>
</ol>
<p>å¦‚æœä½ çš„è¯·æ±‚å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±å¤§äº‹ä¸å¦™äº†ï¼ï¼ä½ å¯ä»¥æƒ³è±¡è¿™æ ·çš„ä¸€ç§æƒ…æ™¯ï¼Œä½ æ­£åœ¨è¿›è¡Œç½‘ä¸Šè´­ç‰©ã€‚è¿™æ—¶ï¼Œä¸€ä¸ªé”™è¯¯äº§ç”Ÿäº†ï¼Œä½†æ˜¯è®¾è®¡è¿™ä¸ªç½‘ç«™çš„äººå¹¶æ²¡æœ‰è®¾è®¡å¤„ç†è¯·æ±‚é”™è¯¯çš„å‡½æ•°ã€‚å› æ­¤ï¼Œåœ¨ä½ ç‚¹å‡»è´­ä¹°ä¹‹åï¼Œä¸€åˆ‡éƒ½é™æ­¢äº†ï¼Œä»€ä¹ˆå˜åŒ–éƒ½æ²¡æœ‰å‘ç”Ÿã€‚é‚£ä¸ªé¡µé¢å°±æŒ‚åœ¨é‚£å„¿ï¼Œä½ ä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸çŸ¥é“ä½ æ˜¯å¦è´­ä¹°æˆåŠŸäº†ã€‚</p>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å»å°è¯•è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æºæ¥å­¦ä¹ æ¥å­¦ä¹ å¦‚ä½•åœ¨ä½¿ç”¨Fetchçš„æ—¶å€™å¤„ç†é”™è¯¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬é”™è¯¯çš„æŠŠ<code>chriscoyier</code>æ‹¼å†™æˆäº†<code>chrissycoyier</code>ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic">// Fetching chrissycoyier's repos instead of chriscoyier's repos</span></span>
<span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"https://api.github.com/users/chrissycoyier/repos"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span></code></pre>
<p>æˆ‘ä»¬çŸ¥é“è¿™ä¸ªè¯·æ±‚ä¼šäº§ç”Ÿé”™è¯¯ï¼Œå› ä¸ºåœ¨GitHubä¸Šæ˜¯æ²¡æœ‰<code>chrissycoyier</code>çš„ã€‚å› ä¸ºé”™è¯¯æ˜¯promiseå¯¹è±¡è¿”å›çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>catch</code>å»å¤„ç†å®ƒã€‚</p>
<p>åœ¨ä¸çŸ¥é“å…·ä½“çš„å¤„ç†æ–¹æ³•ä¹‹å‰ï¼Œä½ å¯èƒ½ä¼šå†™å‡ºè¿™æ ·ä¸€æ®µä»£ç ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"https://api.github.com/users/chrissycoyier/repos"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">())</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">data</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"data is"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">))</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">catch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">error</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"error is"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">));</span></span>
<span class="line"></span></code></pre>
<p>ç„¶åè§¦å‘ä½ çš„fetchè¯·æ±‚ï¼Œä½ å°†ä¼šå¾—åˆ°è¿™æ ·çš„ä¸€ä¸ªç»“æœï¼š</p>
<blockquote>
<p>Fetch failed, but the code that gets executed is the second <code>.then</code> instead of <code>.catch</code></p>
</blockquote>
<p>ä¸ºä»€ä¹ˆç¬¬äºŒä¸ª<code>.then</code>æ–¹æ³•ä¼šè°ƒç”¨æ‰§è¡Œï¼Ÿä¸ºä»€ä¹ˆpromiseä¸æƒ³æˆ‘ä»¬æ‰€æœŸæœ›çš„é‚£æ ·ä½¿ç”¨<code>.catch</code>å»æ•è·é”™è¯¯ã€‚å¤ªææ€–äº†ï¼ï¼ï¼ğŸ˜±ğŸ˜±ğŸ˜±</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>console.log</code>å»æ‰§è¡Œå“åº”å›æ¥çš„æ•°æ®ã€‚æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€äº›ä¸åŒçš„å€¼</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75">  body</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">ReadableStream</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  bodyUsed</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  headers</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">Headers</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  ok</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic">// Response is not ok</span></span>
<span class="line"><span style="color:#E06C75">  redirected</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  status</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">404</span><span style="color:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic">// HTTP status is 404.</span></span>
<span class="line"><span style="color:#E06C75">  statusText</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"Not Found"</span><span style="color:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic">// Request not found</span></span>
<span class="line"><span style="color:#E06C75">  type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"cors"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  url</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"https://api.github.com/users/chrissycoyier/repos"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span></code></pre>
<p>è¿™äº›æ•°æ®å¤§éƒ¨åˆ†éƒ½æ˜¯æ­£å¸¸çš„ï¼Œæ¯”å¦‚<code>ok</code>,<code>status</code>å’Œ<code>statusText</code>ã€‚å¹¶ä¸”ï¼Œå¦‚åŒæˆ‘ä»¬æ‰€é¢„æ–™æ˜¯æˆ‘ä¸€æ ·ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨è¿™å…¶ä¸­å‘ç°chrissycoyieråœ¨GitHubä¸Šçš„æ•°æ®ã€‚</p>
<p>è¿™ä¸ªä¾‹å­å……åˆ†å‘Šè¯‰äº†æˆ‘ä»¬ä¸€ä»¶ååˆ†é‡è¦çš„äº‹æƒ…ï¼ŒFetchå¹¶ä¸ä¼šå…³æ³¨ä½ çš„ajaxæ˜¯å¦æˆåŠŸã€‚å®ƒåªå…³æ³¨å‘é€è¯·æ±‚ï¼Œå¹¶ä¸”ä»ä»æœåŠ¡å™¨æ”¶åˆ°å“åº”ã€‚è¿™æ„å‘³ç€å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æŠ›å‡ºé”™è¯¯ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ç¬¬ä¸€ä¸ª<code>.then</code>è¯·æ±‚ä¸­ï¼Œåªæœ‰å½“è¯·æ±‚æˆåŠŸæ—¶ï¼Œæ‰åº”è¯¥å¯¹è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚éªŒè¯è¯·æ±‚æ˜¯å¦æˆåŠŸå…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦åˆ¤æ–­<code>response</code>æ˜¯å¦ä¸º<code>ok</code>å°±å¯ä»¥äº†ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF">  } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    // Find some way to get to execute .catch()</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span></code></pre>
<p>å½“æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬çš„è¯·æ±‚å¹¶æ²¡æœ‰æˆåŠŸæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>throw</code>æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œæˆ–è€…ä½¿ç”¨Promiseä¸­çš„<code>reject</code>å»æ¿€æ´»<code>catch</code>æ–¹æ³•ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic">// throwing an Error</span></span>
<span class="line"><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">  throw</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Error</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'something went wrong!'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// rejecting a Promise</span></span>
<span class="line"><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reject</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'something went wrong!'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span></code></pre>
<p>ä»¥ä¸Šçš„ä¸¤ç§æ–¹å¼ï¼Œä½¿ç”¨ä»»æ„ä¸€ç§å°±å¯ä»¥äº†ã€‚å› ä¸ºè¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥æ¿€æ´»<code>.catch</code>æ–¹æ³•</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘é€‰æ‹©å»ä½¿ç”¨<code>Promise.reject</code>,å› ä¸ºå®ƒæ›´å®¹æ˜“å»æ‰§è¡Œã€‚<code>Errors</code>ä¹Ÿå¾ˆå¥½ï¼Œä½†æ˜¯å®ƒçš„æ‰§è¡Œæ¯”è¾ƒå›°éš¾ï¼Œå®ƒå”¯ä¸€çš„å¥½å¤„æ˜¯å®ƒåœ¨å †æ ˆè·Ÿè¸ªæ–¹é¢æœ‰ç€å¾—å¤©ç‹¬åšçš„ä¼˜åŠ¿ï¼Œä½†å†Fetchæ–¹æ³•ä¸­æˆ‘ä»¬å¹¶ä¸éœ€è¦è¿™ç§ç‰¹è´¨ã€‚</p>
<p>æ‰€ä»¥ï¼Œä»£ç å°±å˜æˆäº†è¿™æ ·ï¼š</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"https://api.github.com/users/chrissycoyier/repos"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF">    } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reject</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"something went wrong!"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  })</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">data</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"data is"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">))</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">catch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">error</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"error is"</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">));</span></span>
<span class="line"></span></code></pre>
<blockquote>
<p>Failed request, but error gets passed into catch correctly</p>
</blockquote>
<p>å¤ªå¥½äº†ï¼ï¼ç°åœ¨æˆ‘ä»¬æœ‰åŠæ³•å»æ•è·é”™è¯¯äº†ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬è¿™æ ·å¤„ç†é”™è¯¯ä¿¡æ¯è¿”å›ä¸€ä¸ªæ™®é€šçš„æ–‡æœ¬å¹¶ä¸æ˜¯ç‰¹åˆ«çš„å‹å¥½ã€‚æˆ‘ä»¬å¹¶ä¸çŸ¥é“ç©¶ç«Ÿæ˜¯ä»€ä¹ˆåœ°æ–¹å‡ºé—®é¢˜äº†ã€‚æˆ‘ååˆ†ç¡®ä¿¡å†é‡åˆ°é”™è¯¯æ—¶æ”¶åˆ°è¿™æ ·ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ä½ å¹¶ä¸ä¼šæ„Ÿåˆ°ååˆ†æ„‰å¿«ã€‚ã€‚ã€‚</p>
<blockquote>
<p>Yeahâ€¦ I get it that something went wrongâ€¦ but what exactly? ğŸ™</p>
</blockquote>
<p>åˆ°åº•æ˜¯ä»€ä¹ˆé”™äº†ï¼Ÿæ˜¯æœåŠ¡å™¨è¶…æ—¶äº†å—ï¼Ÿæ˜¯æˆ‘çš„è¿æ¥è¢«åˆ‡æ–­äº†å—ï¼Ÿæˆ‘ä»¬æ²¡æœ‰æ–¹æ³•å»å¾—çŸ¥ï¼æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•èƒ½å‘Šè¯‰æˆ‘ä»¬è¯·æ±‚å‘ç”Ÿäº†ä»€ä¹ˆé”™è¯¯ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤„ç†å®ƒã€‚</p>
<p>è®©æˆ‘ä»¬å†æ¥çœ‹ä¸€çœ‹è¿”å›çš„ä¿¡æ¯ï¼Œçœ‹èƒ½ä¸èƒ½æ‰¾åˆ°ä»€ä¹ˆçµæ„Ÿ</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">{</span></span>
<span class="line"><span style="color:#E06C75">  body</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">ReadableStream</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  bodyUsed</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  headers</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">Headers</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  ok</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic">// Response is not ok</span></span>
<span class="line"><span style="color:#E06C75">  redirected</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  status</span><span style="color:#ABB2BF">: </span><span style="color:#D19A66">404</span><span style="color:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic">// HTTP status is 404.</span></span>
<span class="line"><span style="color:#E06C75">  statusText</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"Not Found"</span><span style="color:#ABB2BF">; </span><span style="color:#7F848E;font-style:italic">// Request not found</span></span>
<span class="line"><span style="color:#E06C75">  type</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"cors"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#E06C75">  url</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"https://api.github.com/users/chrissycoyier/repos"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span></code></pre>
<p>oh,å¤ªå¥½äº†ï¼åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œé”™è¯¯çš„åŸå› æ˜¯æˆ‘ä»¬è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚æˆ‘ä»¬å¯ä»¥è¿”å›ä¸€ä¸ª404çŠ¶æ€ç ã€‚è¿™æ ·æˆ‘ä»¬å°±çŸ¥é“è¯¥åšä»€ä¹ˆäº†ã€‚</p>
<p>å°†<code>status</code>å’Œ<code>statusText</code>æ”¾å…¥<code>.catch</code>æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>.reject</code>æ¥åšè¿™ä»¶äº‹:</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">();</span></span>
<span class="line"><span style="color:#ABB2BF">    } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reject</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">        status</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">        statusText</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">statusText</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">      });</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  })</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">catch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">error</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">error</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#56B6C2"> ===</span><span style="color:#D19A66"> 404</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">      // do something about 404</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"></span></code></pre>
<p>å¥½ï¼ç°åœ¨æƒ³å¯¹äºä¹‹å‰å·²ç»æœ‰äº†å¾ˆå¤§çš„è¿›å±•äº†ï¼</p>
<p>è¿™ç§é”™è¯¯å¤„ç†æ–¹å¼å¯¹äºä¸éœ€è¦ç‰¹å®šè§£é‡Šçš„é‚£äº›ç¡®å®šçš„HTTPçŠ¶æ€æ˜¯å·²ç»å®Œå…¨è¶³å¤Ÿäº†çš„ï¼Œåƒï¼š</p>
<ul>
<li>401: Unauthorized</li>
<li>404: Not found</li>
<li>408: Connection timeout</li>
</ul>
<p>ä½†æ˜¯å®ƒå¯¹äºè¿™ä¸€ç§æƒ…å†µå°±ä¼šæ˜¾å¾—ç‰¹åˆ«ä¸å‹å¥½ï¼š</p>
<ul>
<li>400: Bad request.</li>
</ul>
<p>æ˜¯ä»€ä¹ˆé€ æˆäº†ä¸€ä¸ªé”™è¯¯çš„è¯·æ±‚ï¼Ÿå¤ªå¤šçš„å¯èƒ½æ€§äº†ï¼ä¾‹å¦‚ï¼Œå¦‚æœä½ ä¸¢å¤±äº†ä¸€äº›å¿…è¦çš„å‚æ•°ï¼Œä¼šè¿”å›400ã€‚</p>
<blockquote>
<p>Stripeâ€™s explains it returns a 400 error if the request is missing a required field</p>
</blockquote>
<p>å¦‚æœæˆ‘ä»¬åªåƒä¹‹å‰ä¸€æ ·å¤„ç†çš„è¯ï¼Œé‚£ä¹ˆåªä¼šè¿”å›ä¸€ä¸ª400é”™è¯¯ã€‚æˆ‘ä»¬å°±ä¸çŸ¥é“ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬éœ€è¦æ›´å¤šçš„ä¿¡æ¯æ¥å‘Šè¯‰æˆ‘ä»¬ï¼Œç©¶ç«Ÿç¼ºå°‘äº†ä»€ä¹ˆï¼Ÿæ˜¯ç”¨æˆ·å¿˜è®°å¡«å†™äº†å§“åï¼Ÿé‚®ç®±ï¼Ÿè¿˜æ˜¯ä¿¡ç”¨å¡ä¿¡æ¯ï¼Ÿæˆ‘ä»¬å¹¶ä¸çŸ¥é“ã€‚</p>
<p>ç†æƒ³çš„æ¥è¯´ï¼Œè¿™ç§æƒ…å†µä¸‹æœåŠ¡å™¨åº”è¯¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå‘Šè¯‰æˆ‘ä»¬è¯·æ±‚ä¸ºä»€ä¹ˆä¼šå¤±è´¥ã€‚å¦‚æœä½ çš„åå°ä½¿ç”¨çš„æ˜¯nodeå’Œexpressï¼Œä½ å¯èƒ½ä¼šè¿™ä¹ˆå†™ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#E5C07B">res</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">status</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">400</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">send</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">  err</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">"no first name"</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span></code></pre>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸èƒ½å†ç¬¬ä¸€ä¸ª<code>.then</code>æ–¹æ³•é‡Œä½¿ç”¨reject,å› ä¸ºæˆ‘ä»¬åªèƒ½åœ¨æ‰§è¡Œäº†<code>response.json</code>ä¹‹åæ‰èƒ½è¯»å–æœåŠ¡å™¨æŠ›å‡ºçš„é”™è¯¯ï¼Œç„¶åæˆ‘ä»¬æ‰èƒ½å†³å®šæˆ‘ä»¬åšäº›ä»€ä¹ˆã€‚</p>
<p>å°±åƒä¸‹é¢è¿™äº›ä»£ç ï¼š</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-error"</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">handleResponse</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">function</span><span style="color:#61AFEF"> handleResponse</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">json</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E06C75"> json</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">    } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reject</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">json</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span></code></pre>
<p>è®©æˆ‘ä»¬å‰–æä¸€ä¸‹è¿™ä¸€å¨ä»£ç ç©¶ç«Ÿåœ¨å¹²å•¥ï¼é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨<code>response.json</code>æ¥è¯»å–æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„jsonæ•°æ®ã€‚å› ä¸º<code>response.json</code>è¿”å›çš„æ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç«‹å³ä½¿ç”¨<code>.then</code>æ–¹æ³•å»è¯»å–è¿™ä¸ªæ•°æ®ç©¶ç«Ÿæ˜¯å•¥ã€‚</p>
<p>æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ª<code>.then</code>æ–¹æ³•é‡ŒåŒ…å«ç€ç¬¬äºŒä¸ª<code>.then</code>æ–¹æ³•å› ä¸ºæˆ‘ä»¬éœ€è¦å»åˆ¤æ–­<code>response.ok</code>æ˜¯å¦ä¸ºçœŸï¼Œä»è€Œåˆ¤æ–­å“åº”æ˜¯å¦æˆåŠŸ</p>
<p>å¦‚æœä½ æƒ³å°† statuså’ŒstatusTextå’Œjsonä¸€èµ·å‘é€ç»™<code>.catch</code>,ä½ å¯ä»¥ä½¿ç”¨<code>Object.assign()</code>å°†å®ƒä»¬è”åˆåœ¨ä¸€èµ·ã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#C678DD">let</span><span style="color:#E06C75"> error</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> Object</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">assign</span><span style="color:#ABB2BF">({}, </span><span style="color:#E06C75">json</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#E06C75">  status</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">  statusText</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">statusText</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"><span style="color:#C678DD">return</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reject</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span></code></pre>
<p>ä½¿ç”¨æ–°çš„<code>handelResponse</code>å‡½æ•°ï¼Œä½ å¯ä»¥è¿™æ ·ä¹¦å†™ä»£ç ã€‚è¿™ç§æ–¹å¼å¯ä»¥è‡ªåŠ¨å°†æ•°æ®å‘é€ç»™<code>.then</code>å’Œ<code>.catch</code></p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">handleResponse</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">data</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">))</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">catch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">error</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">));</span></span>
<span class="line"></span></code></pre>
<p>è¿™æ˜¯æˆ‘ä»¬ååˆ†é«˜å…´ï¼Œå› ä¸ºæˆ‘ä»¬æŠ˜è…¾äº†è€åŠå¤©ï¼Œç»ˆäºå®Œæˆäº†å¯¹é”™è¯¯çš„å¤„ç†ã€‚ä½†æ˜¯å½“æˆ‘ä»¬åä¸‹æ¥ï¼Œå–ç€å’–å•¡ï¼Œäº«å—ç€è¿™æƒ¬æ„çš„ä¸‹åˆèŒ¶çš„æ—¶å€™ã€‚æˆ‘ä»¬çªç„¶æ„è¯†åˆ°ã€‚ã€‚ã€‚æˆ‘ä»¬ä¼¼ä¹è¿˜æ²¡æœ‰å¯¹å“åº”æ•°æ®åšå¤„ç†ï¼ï¼ï¼</p>
<h3 id="å¤„ç†å…¶ä»–å“åº”ç±»å‹">å¤„ç†å…¶ä»–å“åº”ç±»å‹</h3>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªå¤„ç†äº†Fetchçš„jsonæ•°æ®è¯·æ±‚ã€‚è¿™åœ¨å½“ä»Š90%çš„APIéƒ½è¿”å›jsonæ•°æ®çš„æƒ…å†µä¸‹è§£å†³äº†å¤§éƒ¨åˆ†çš„é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦å¤–çš„10%æ€ä¹ˆåŠã€‚ã€‚ã€‚</p>
<p>å‡å¦‚ä½ ä½¿ç”¨ä¸Šé¢çš„ä»£ç å»æ¥å—XMLçš„å“åº”ï¼Œä½ å°†ç«‹å³æ•è·ä¸€ä¸ªé”™è¯¯ï¼š</p>
<blockquote>
<p>Parsing an invalid JSON produces a Syntax error</p>
</blockquote>
<p>å› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸²xmlæ•°æ®ï¼Œè€Œéjsonæ•°æ®ã€‚æœ€ç®€å•çš„ï¼Œæˆ‘ä»¬ä¸èƒ½è¿”å›<code>response.json</code>, å–è€Œä»£ä¹‹çš„æ˜¯<code>response.text</code>ã€‚æƒ³è¦è¿™ä¹ˆåšçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥è¯·æ±‚å¤´é‡Œçš„ content type</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">  let</span><span style="color:#E06C75"> contentType</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">headers</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'content-type'</span><span style="color:#ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">contentType</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">includes</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'application/json'</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    // ...</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  else</span><span style="color:#C678DD"> if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">contentType</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">includes</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'text/html'</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">text</span><span style="color:#ABB2BF">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    // ...</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">  else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    // Handle other responses accordingly...</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span></code></pre>
<p>ä¸‹é¢æ˜¯ä¹‹å‰æ‰€æœ‰ä»£ç çš„ä¸€ä¸ªåˆé›†ï¼š</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">handleResponse</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">data</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">data</span><span style="color:#ABB2BF">))</span></span>
<span class="line"><span style="color:#ABB2BF">  .</span><span style="color:#61AFEF">catch</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">error</span><span style="color:#C678DD"> =&gt;</span><span style="color:#E5C07B"> console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">error</span><span style="color:#ABB2BF">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">function</span><span style="color:#61AFEF"> handleResponse</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">  let</span><span style="color:#E06C75"> contentType</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">headers</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">get</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"content-type"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#C678DD">  if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">contentType</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">includes</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"application/json"</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#61AFEF"> handleJSONResponse</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">response</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  } </span><span style="color:#C678DD">else</span><span style="color:#C678DD"> if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">contentType</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">includes</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"text/html"</span><span style="color:#ABB2BF">)) {</span></span>
<span class="line"><span style="color:#C678DD">    return</span><span style="color:#61AFEF"> handleTextResponse</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">response</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic">    // Other response types as necessary. I haven't found a need for them yet though.</span></span>
<span class="line"><span style="color:#C678DD">    throw</span><span style="color:#C678DD"> new</span><span style="color:#61AFEF"> Error</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">`Sorry, content-type </span><span style="color:#C678DD">${</span><span style="color:#E06C75">contentType</span><span style="color:#C678DD">}</span><span style="color:#98C379"> not supported`</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">function</span><span style="color:#61AFEF"> handleJSONResponse</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">json</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">json</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E06C75"> json</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">    } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reject</span><span style="color:#ABB2BF">(</span></span>
<span class="line"><span style="color:#E5C07B">        Object</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">assign</span><span style="color:#ABB2BF">({}, </span><span style="color:#E06C75">json</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#E06C75">          status</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">          statusText</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">statusText</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">        })</span></span>
<span class="line"><span style="color:#ABB2BF">      );</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"><span style="color:#C678DD">function</span><span style="color:#61AFEF"> handleTextResponse</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">response</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> response</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">text</span><span style="color:#ABB2BF">().</span><span style="color:#61AFEF">then</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">text</span><span style="color:#C678DD"> =&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">ok</span><span style="color:#ABB2BF">) {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E06C75"> json</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">    } </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#C678DD">      return</span><span style="color:#E5C07B"> Promise</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reject</span><span style="color:#ABB2BF">({</span></span>
<span class="line"><span style="color:#E06C75">        status</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">status</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">        statusText</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">response</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">statusText</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">        err</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">text</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">      });</span></span>
<span class="line"><span style="color:#ABB2BF">    }</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span>
<span class="line"></span></code></pre>
<p>å¦‚æœä½ å†³å®šä½¿ç”¨Fetchï¼Œé‚£ä¹ˆä½ å°†ä¼šç»å¸¸ä½¿ç”¨åˆ°<code>control</code>+<code>c</code>/<code>v</code>ã€‚å¦‚æœéœ€è¦åœ¨é¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨Fetchçš„è¯ï¼Œä¸‹é¢ä»‹ç»äº†ä¸€ä¸ªFetchçš„åº“â€”zIFetch.</p>
<h3 id="ä»‹ç»-zifetch">ä»‹ç» zIFetch</h3>
<p>zIFetchæ˜¯ä¸€ä¸ªæŠ½è±¡äº†æ•°æ®å¤„ç†å‡½æ•°çš„åº“ï¼Œå®ƒè®©ä½ åªéœ€è¦å…³å¿ƒæ•°æ®å’Œé”™è¯¯å¤„ç†è€Œä¸éœ€è¦æ‹…å¿ƒå“åº”ã€‚</p>
<p>ä½¿ç”¨zlFetchï¼Œé¦–å…ˆä½ å¯ä»¥è¿™ä¹ˆå®‰è£…å®ƒã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#61AFEF">npm</span><span style="color:#98C379"> install</span><span style="color:#98C379"> zl-fetch</span><span style="color:#D19A66"> --save</span></span>
<span class="line"></span></code></pre>
<p>ç„¶åï¼Œä½ å¯ä»¥åœ¨åº“é‡Œå¼•ç”¨å®ƒã€‚</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic">// Polyfills (if needed)</span></span>
<span class="line"><span style="color:#61AFEF">require</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"isomorphic-fetch"</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E;font-style:italic">// or whatwg-fetch or node-fetch if you prefer</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// ES6 Imports</span></span>
<span class="line"><span style="color:#C678DD">import</span><span style="color:#E06C75"> zlFetch</span><span style="color:#C678DD"> from</span><span style="color:#98C379"> "zl-fetch"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// CommonJS Imports</span></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#E5C07B"> zlFetch</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> require</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"zl-fetch"</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span></code></pre>
<p>zIFetchä¸ä»…ä»…å¯ä»¥ç§»é™¤å¤„ç†Fetchå“åº”æ•°æ®çš„éœ€è¦ã€‚å®ƒè¿˜å¯ä»¥å¸®ä½ å‘é€æ•°æ®è€Œä¸éœ€è¦åœ¨bodyé‡Œå¯¹æ•°æ®è¿›è¡Œè½¬æ¢</p>
<p>ä¸‹é¢çš„è¿™äº›ä»£ç å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#C678DD">let</span><span style="color:#E06C75"> content</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> {</span><span style="color:#E06C75">some</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'content'</span><span style="color:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// Post request with fetch</span></span>
<span class="line"><span style="color:#61AFEF">fetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'some-url'</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#E06C75">  method</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'post'</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">  headers</span><span style="color:#ABB2BF">: {</span><span style="color:#98C379">'Content-Type'</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'application/json'</span><span style="color:#ABB2BF">}</span></span>
<span class="line"><span style="color:#E06C75">  body</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">JSON</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">stringify</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">content</span><span style="color:#ABB2BF">)</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// Post request with zlFetch</span></span>
<span class="line"><span style="color:#61AFEF">zlFetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">'some-url'</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#E06C75">  method</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">'post'</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#E06C75">  body</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">content</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span></code></pre>
<p>zIFetchè¿˜ä½¿å¾—web Tokensè®¤è¯å˜å¾—æ›´åŠ å®¹æ˜“</p>
<p>èº«ä»½éªŒè¯çš„æ ‡å‡†æ˜¯åœ¨å¤´éƒ¨æ·»åŠ ä¸€ä¸ª<code>Authorization</code>å¯†é’¥ã€‚<code>Authorization</code>çš„å†…å®¹å°†ä¼šè®¾ç½®åˆ°<code>Bearer your-token-here</code>ã€‚zlFetchå°†å¸®åŠ©ä½ æ·»åŠ è¿™ä¸ª<code>token</code>é…ç½®çš„å­—æ®µã€‚</p>
<p>æ‰€ä»¥ä¸‹é¢è¿™ä¸¤æ®µä»£ç å®é™…ä¸Šæ˜¯ç­‰ä»·çš„</p>
<pre class="astro-code one-dark-pro" style="color:#abb2bf;white-space:pre-wrap;word-wrap:break-word;background-color:#282c34;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#C678DD">let</span><span style="color:#E06C75"> token</span><span style="color:#56B6C2"> =</span><span style="color:#98C379"> "someToken"</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#61AFEF">zlFetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">, {</span></span>
<span class="line"><span style="color:#E06C75">  headers</span><span style="color:#ABB2BF">: {</span></span>
<span class="line"><span style="color:#E06C75">    Authorization</span><span style="color:#ABB2BF">: </span><span style="color:#98C379">`Bearer </span><span style="color:#C678DD">${</span><span style="color:#E06C75">token</span><span style="color:#C678DD">}</span><span style="color:#98C379">`</span><span style="color:#ABB2BF">,</span></span>
<span class="line"><span style="color:#ABB2BF">  },</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic">// Authentication with JSON Web Tokens with zlFetch</span></span>
<span class="line"><span style="color:#61AFEF">zlFetch</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">"some-url"</span><span style="color:#ABB2BF">, { </span><span style="color:#E06C75">token</span><span style="color:#ABB2BF"> });</span></span>
<span class="line"></span></code></pre>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>Fetchæ˜¯ä¸€é¡¹ååˆ†ç¥å¥‡çš„æŠ€æœ¯ï¼Œå®ƒä½¿å¾—æ”¶å‘æ¶ˆæ¯å˜å¾—æ›´åŠ å®¹æ˜“ã€‚æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨XHRè¯·æ±‚ï¼Œä¹Ÿä¸éœ€è¦å¼•å…¥åƒjQueryä¸€æ ·çš„åº“ã€‚</p>
<p>å°½ç®¡Fetchå¾ˆå¥½ï¼Œä½†æ˜¯å®ƒå¤„ç†èµ·é”™è¯¯æ¥å´å¹¶ä¸ç®€å•ã€‚ä½ éœ€è¦å°†è®¸å¤šé”™è¯¯ä¿¡æ¯ä¼ é€’åˆ°<code>.catch</code>æ–¹æ³•ä¸­</p>
<p>ä½¿ç”¨zlFetchå¯ä»¥é¿å…è¿›è¡Œé”™è¯¯å¤„ç†ã€‚</p>
<h3 id="ref">ref</h3>
<p><a href="https://css-tricks.com/using-fetch/">Using Fetch</a></p> </article> <ul class="astro-vj4tpspi my-8"> <li class="astro-blwjyjpt inline-block my-1 underline-offset-4"> <a href="/tags/js/" class="astro-blwjyjpt group pr-2 text-sm" data-astro-transition-scope="astro-36ssibgs-2"> <svg xmlns="http://www.w3.org/2000/svg" class="astro-blwjyjpt scale-75"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">js</span> </a> </li> <li class="astro-blwjyjpt inline-block my-1 underline-offset-4"> <a href="/tags/fetch/" class="astro-blwjyjpt group pr-2 text-sm" data-astro-transition-scope="astro-36ssibgs-3"> <svg xmlns="http://www.w3.org/2000/svg" class="astro-blwjyjpt scale-75"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">fetch</span> </a> </li> <li class="astro-blwjyjpt inline-block my-1 underline-offset-4"> <a href="/tags/ajax/" class="astro-blwjyjpt group pr-2 text-sm" data-astro-transition-scope="astro-36ssibgs-4"> <svg xmlns="http://www.w3.org/2000/svg" class="astro-blwjyjpt scale-75"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">ajax</span> </a> </li>  </ul> <div class="astro-vj4tpspi flex items-center flex-col-reverse gap-6 justify-between sm:flex-row-reverse sm:gap-4 sm:items-end"> <button id="back-to-top" class="astro-vj4tpspi focus-outline hover:opacity-75 py-1 whitespace-nowrap"> <svg xmlns="http://www.w3.org/2000/svg" class="astro-vj4tpspi rotate-90"> <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" class="astro-vj4tpspi"></path> </svg> <span class="astro-vj4tpspi">Back to Top</span> </button> <div class="astro-wkojbtzc social-icons"> <span class="astro-wkojbtzc italic">Share this post on:</span> <div class="astro-wkojbtzc text-center"> <a href="https://wa.me/?text=https://astro-paper.pages.dev/posts/fetch/" class="astro-wkojbtzc group hover:text-skin-accent inline-block link-button" title="Share this post via WhatsApp"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9"></path>
      <path d="M9 10a0.5 .5 0 0 0 1 0v-1a0.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a0.5 .5 0 0 0 0 -1h-1a0.5 .5 0 0 0 0 1"></path>
    </svg> <span class="astro-wkojbtzc sr-only">Share this post via WhatsApp</span> </a><a href="https://www.facebook.com/sharer.php?u=https://astro-paper.pages.dev/posts/fetch/" class="astro-wkojbtzc group hover:text-skin-accent inline-block link-button" title="Share this post on Facebook"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3"></path>
  </svg> <span class="astro-wkojbtzc sr-only">Share this post on Facebook</span> </a><a href="https://twitter.com/intent/tweet?url=https://astro-paper.pages.dev/posts/fetch/" class="astro-wkojbtzc group hover:text-skin-accent inline-block link-button" title="Tweet this post"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"></path>
    </svg> <span class="astro-wkojbtzc sr-only">Tweet this post</span> </a><a href="https://t.me/share/url?url=https://astro-paper.pages.dev/posts/fetch/" class="astro-wkojbtzc group hover:text-skin-accent inline-block link-button" title="Share this post via Telegram"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4"></path>
      </svg> <span class="astro-wkojbtzc sr-only">Share this post via Telegram</span> </a><a href="https://pinterest.com/pin/create/button/?url=https://astro-paper.pages.dev/posts/fetch/" class="astro-wkojbtzc group hover:text-skin-accent inline-block link-button" title="Share this post on Pinterest"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <line x1="8" y1="20" x2="12" y2="11"></line>
      <path d="M10.7 14c.437 1.263 1.43 2 2.55 2c2.071 0 3.75 -1.554 3.75 -4a5 5 0 1 0 -9.7 1.7"></path>
      <circle cx="12" cy="12" r="9"></circle>
    </svg> <span class="astro-wkojbtzc sr-only">Share this post on Pinterest</span> </a><a href="mailto:?subject=See%20this%20post&amp;body=https://astro-paper.pages.dev/posts/fetch/" class="astro-wkojbtzc group hover:text-skin-accent inline-block link-button" title="Share this post via email"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <rect x="3" y="5" width="18" height="14" rx="2"></rect>
      <polyline points="3 7 12 13 21 7"></polyline>
    </svg> <span class="astro-wkojbtzc sr-only">Share this post via email</span> </a> </div> </div>  </div> </main> <footer class="astro-sz7xmlte mt-auto"> <div class="max-w-3xl mx-auto px-0"> <hr class="border-skin-line" aria-hidden="true"> </div> <div class="astro-sz7xmlte footer-wrapper"> <div class="astro-upu6fzxr flex social-icons"> <a href="https://github.com/myjdml" class="inline-block group hover:text-skin-accent link-button astro-upu6fzxr" title=" myjdml's Blog on Github"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path>
  </svg> <span class="sr-only astro-upu6fzxr"> myjdml's Blog on Github</span> </a><a href="mailto:myjdml200@gmail.com" class="inline-block group hover:text-skin-accent link-button astro-upu6fzxr" title="Send an email to myjdml's Blog"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <rect x="3" y="5" width="18" height="14" rx="2"></rect>
      <polyline points="3 7 12 13 21 7"></polyline>
    </svg> <span class="sr-only astro-upu6fzxr">Send an email to myjdml's Blog</span> </a> </div>  <div class="astro-sz7xmlte copyright-wrapper"> <span class="astro-sz7xmlte">Copyright Â© 2024</span> <span class="astro-sz7xmlte separator">&nbsp;|&nbsp;</span> <span class="astro-sz7xmlte">All rights reserved.</span> </div> </div> </footer>     <script>function createProgressBar(){const o=document.createElement("div");o.className="progress-container fixed top-0 z-10 h-1 w-full bg-skin-fill";const e=document.createElement("div");e.className="progress-bar h-1 w-0 bg-skin-accent",e.id="myBar",o.appendChild(e),document.body.appendChild(o)}createProgressBar();function updateScrollProgress(){const o=document.body.scrollTop||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=o/e*100;if(document){const t=document.getElementById("myBar");t&&(t.style.width=n+"%")}}document.addEventListener("scroll",updateScrollProgress);function addHeadingLinks(){let o=Array.from(document.querySelectorAll("h2, h3, h4, h5, h6"));for(let e of o){e.classList.add("group");let n=document.createElement("a");n.innerText="#",n.className="heading-link hidden group-hover:inline-block ml-2",n.href="#"+e.id,n.ariaHidden="true",e.appendChild(n)}}addHeadingLinks();function attachCopyButtons(){let o="Copy",e=Array.from(document.querySelectorAll("pre"));for(let t of e){let c=document.createElement("div");c.style.position="relative";let d=document.createElement("button");d.className="copy-code absolute right-3 -top-3 rounded bg-skin-card px-2 py-1 text-xs leading-4 text-skin-base font-medium",d.innerHTML=o,t.setAttribute("tabindex","0"),t.appendChild(d),t?.parentNode?.insertBefore(c,t),c.appendChild(t),d.addEventListener("click",async()=>{await n(t,d)})}async function n(t,c){let r=t.querySelector("code")?.innerText;await navigator.clipboard.writeText(r??""),c.innerText="Copied",setTimeout(()=>{c.innerText=o},700)}}attachCopyButtons();function backToTop(){document.querySelector("#back-to-top")?.addEventListener("click",()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0})}backToTop();
</script></body></html>